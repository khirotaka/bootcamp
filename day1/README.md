# Day1

## stdioって何
多くの人が一度は以下のコードを読んだり書いたりした事があると思う。

```c
#include <stdio.h>

int main(void) {
    printf("hello, world\n");
    return 0;
}
```

では、1行目の `#include <stdio.h>` の `stdio` とは何だろうか？
少なくとも **おまじない** といういう回答は不正解である。  
今日は、この問題に立ち向かいつつ Unix/Linux業界における基本中の基本について説明する。

## Standard I/O
プログラミングにおいて関数は何らかの略語になっていることが多い。当然この `stdio` も略語である。  
正解は、本節の題名にもなっている通り **St**andar**d** **I/O** 直訳すると、 **標準入出力** という意味である。
ではそれぞれをもう少し掘り下げてみよう。

### 標準出力
これは諸君が嫌というほど見てきた C言語の `printf()` や Pythonの `print()` がこれに該当する。
**デフォルトでは、** コマンドラインに文字列を出力するだけだ。では、別の方法を試してみよう。  
まず初めにターミナル上で、以下のコマンドを書いて欲しい。

```sh
jetson@jetson:~$ echo hello
```

この `echo` というコマンドは引数で与えられた文字列を標準出力として出力するただそれだけのコマンドだ。
Pythonの `print()` に対応すると思ってもらって問題ない。  
では、次にこれをテキストに保存してみよう。

```sh
jetson@jetson:~$ echo hello > hello.txt 
```
  
これで `hello.txt` というファイルがカレントディレクトリ上に作成され、その中に hello という文字列が保存された。  
実際に確認してみよう。
ターミナル上で `ls` と打てばファイル・ディレクトリ名を確認できるし、 `cat ファイル名` とすればファイルの中身を標準出力で得ることが出来る。

```sh
jetson@jetson:~$ ls
jetson@jetson:~$ cat hello.txt
```

こういった標準出力をファイルに書き込む操作のことをリダイレクトと呼ぶ。
この操作で注意が必要なのが `>` の数だ。以下を参照してほしい。

* `>` ... 指定したファイルに**上書き**。
* `>>` ... 指定したファイルに**追記**。

上書きと言うことは元のデータは削除されるので注意が必要だ。

### 標準入力
標準出力のデフォルトの出力先はディスプレイだった。では、標準入力のデフォルトの入力先はどこだろう？  
答えは簡単。キーボードである。C言語では以下の関数を使って入力を受け取り、そのまま画面に表示するといったコードを書いたことがある人も多いだろう。

```c
#include <stdio.h>

int main(void) {
    int age = 0;
    printf("年齢を入力してください。: ");
    scanf("%d", &age);
    
    printf("%d\n", age);
    return 0;
}
```

この `scanf()` が標準入力を担当する関数である。
この標準入力も標準出力の時と同じような手順でデータを処理することが出来る。つまり、テキストを直接与える事が出来ると言う事だ。

ここで、`grep` と `curl` というUnixコマンドを伝授しよう。
`grep` は指定した文字列が標準入力内に含まれているかどうかを調べるコマンド。
`curl` はurlを指定するとそれをダウンロードし **標準出力で返す** コマンドだ。

まず、 `curl` 単体でファイルをダウンロードしてみよう。

```sh
jetson@jetson:~$ curl https://raw.githubusercontent.com/khirotaka/bootcamp/master/day1/dummy.txt > dl.txt
jetson@jetson:~$ cat dl.txt
```

うん、非常に見にくい。次に、このファイルの中から特定の文字列を探してみよう。
```sh
jetson@jetson:~$ grep we dl.txt
```

これで該当する箇所だけをピックアップすることが出来た。

### パイプライン
最後にパイプラインについて説明しよう。これはあるコマンドの出力を別のコマンドの入力にする操作のことだ。
例えば、先の様にWeb上ファイルをダウンロードし、その中から目的のデータを探す操作を行ったりすると言ったものだ。
実際にコマンドを書いてみよう。

```sh
jetson@jetson:~$ cat dl.txt | grep we
```

これは非常に重要な操作なので、覚えておくと良い。


## シェル
今まで使ってきたターミナルはシェルと呼ばれている。
これはユーザからコマンドを受け取ると、それをOSのカーネルに伝えて、カーネルが処理した結果を解釈してユーザに返すという、
コンピュータとユーザとの架け橋になってくれている重要な機構だ。

### シェル変数と環境変数
シェルには **シェルスクリプト** というプログラミング環境が用意されている。そして、プログラミングが出来ると言うことは、変数を作る事が出来る。
早速変数を作ってみよう。

```sh
jetson@jetson:~$ a="hello"
```
これは見ての通り、変数`a`定義し、中に文字列 `hello` を格納しているだけだ。
では、`echo` コマンド使って変数 `a` の中身を見てみよう。

```sh
jetson@jetson:~$ echo a
```

残念ながらこれでは正しく変数の中身を参照することが出来ない。変数の中身を参照するには、 `$` をつける必要がある。

```sh
jetson@jetson:~$ echo $a
```

